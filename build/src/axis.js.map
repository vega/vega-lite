{"version":3,"file":"axis.js","sourceRoot":"","sources":["../../src/axis.ts"],"names":[],"mappings":";;;AAEA,+BAAsC;AA2EzB,QAAA,UAAU,GAAe,CAAC,QAAQ,EAAE,MAAM,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;AAIrF;;;GAGG;AACU,QAAA,kBAAkB,GAG3B;IACF,IAAI,EAAE,MAAM;IACZ,SAAS,EAAE,MAAM;IAEjB,MAAM,EAAE,MAAM;IACd,MAAM,EAAE,MAAM;IACd,UAAU,EAAE,MAAM;IAClB,YAAY,EAAE,MAAM;IACpB,SAAS,EAAE,MAAM;IACjB,SAAS,EAAE,MAAM;IACjB,MAAM,EAAE,MAAM;IACd,KAAK,EAAE,MAAM;IACb,KAAK,EAAE,MAAM;IACb,MAAM,EAAE,MAAM;IAEd,KAAK,EAAE,MAAM;IACb,MAAM,EAAE,MAAM,CAAC,uDAAuD;CACvE,CAAC;AAkCF,IAAM,4BAA4B,GAAgC;IAChE,MAAM,EAAE,CAAC;IAET,MAAM,EAAE,CAAC;IACT,MAAM,EAAE,CAAC;IACT,IAAI,EAAE,CAAC;IACP,UAAU,EAAE,CAAC;IACb,UAAU,EAAE,CAAC;IACb,YAAY,EAAE,CAAC;IACf,MAAM,EAAE,CAAC;IACT,YAAY,EAAE,CAAC;IACf,SAAS,EAAE,CAAC;IACZ,SAAS,EAAE,CAAC;IACZ,MAAM,EAAE,CAAC;IACT,QAAQ,EAAE,CAAC;IACX,SAAS,EAAE,CAAC;IACZ,KAAK,EAAE,CAAC;IACR,QAAQ,EAAE,CAAC;IACX,KAAK,EAAE,CAAC;IACR,YAAY,EAAE,CAAC;IACf,MAAM,EAAE,CAAC;IACT,MAAM,EAAE,CAAC;CACV,CAAC;AAEF,IAAM,qBAAqB,wBACtB,4BAA4B,IAC/B,QAAQ,EAAE,CAAC,EACX,UAAU,EAAE,CAAC,EACb,cAAc,EAAE,CAAC,GAClB,CAAC;AAEF,IAAM,wBAAwB,sBAC5B,KAAK,EAAE,CAAC,IACL,4BAA4B,IAC/B,SAAS,EAAE,CAAC,EACZ,MAAM,EAAE,CAAC,GACV,CAAC;AAEF,wBAA+B,IAAY;IACzC,OAAO,CAAC,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;AACvC,CAAC;AAFD,wCAEC;AAEY,QAAA,kBAAkB,GAAG,eAAQ,CAAC,wBAAwB,CAAC,CAAC;AAErE,gCAAgC;AACnB,QAAA,eAAe,GAAG,eAAQ,CAAC,qBAAqB,CAAC,CAAC","sourcesContent":["import {DateTime} from './datetime';\nimport {Guide, GuideEncodingEntry, VlOnlyGuideConfig} from './guide';\nimport {Flag, flagKeys} from './util';\nimport {AxisOrient, VgAxis, VgAxisBase, VgAxisConfig} from './vega.schema';\n\n\n\nexport interface AxisConfig extends VgAxisConfig, VlOnlyGuideConfig {}\n\nexport interface Axis extends VgAxisBase, Guide {\n  /**\n   * The orientation of the axis. One of `\"top\"`, `\"bottom\"`, `\"left\"` or `\"right\"`. The orientation can be used to further specialize the axis type (e.g., a y axis oriented for the right edge of the chart).\n   *\n   * __Default value:__ `\"bottom\"` for x-axes and `\"left\"` for y-axes.\n   */\n  orient?: AxisOrient;\n\n  /**\n   * The offset, in pixels, by which to displace the axis from the edge of the enclosing group or data rectangle.\n   *\n   * __Default value:__ derived from the [axis config](https://vega.github.io/vega-lite/docs/config.html#facet-scale-config)'s `offset` (`0` by default)\n   */\n  offset?: number;\n\n  /**\n   * The anchor position of the axis in pixels. For x-axis with top or bottom orientation, this sets the axis group x coordinate. For y-axis with left or right orientation, this sets the axis group y coordinate.\n   *\n   * __Default value__: `0`\n   */\n  position?: number;\n\n\n  /**\n   * The rotation angle of the axis labels.\n   *\n   * __Default value:__ `-90` for nominal and ordinal fields; `0` otherwise.\n   *\n   * @minimum -360\n   * @maximum 360\n   */\n  labelAngle?: number;\n\n  /**\n   * A desired number of ticks, for axes visualizing quantitative scales. The resulting number may be different so that values are \"nice\" (multiples of 2, 5, 10) and lie within the underlying scale's range.\n   * @minimum 0\n   *\n   * __Default value__: Determine using a formula `ceil(width/40)` for x and `ceil(height/40)` for y.\n   */\n  tickCount?: number;\n\n  /**\n   * Explicitly set the visible axis tick values.\n   */\n  values?: number[] | string[] | boolean[] | DateTime[];\n\n  /**\n   * A non-positive integer indicating z-index of the axis.\n   * If zindex is 0, axes should be drawn behind all chart elements.\n   * To put them in front, use `\"zindex = 1\"`.\n   *\n   * __Default value:__ `1` (in front of the marks) for actual axis and `0` (behind the marks) for grids.\n   *\n   * @TJS-type integer\n   * @minimum 0\n   */\n  zindex?: number;\n\n  /**\n   * Mark definitions for custom axis encoding.\n   *\n   * @hide\n   */\n  encoding?: AxisEncoding;\n}\n\n\nexport type AxisPart = keyof AxisEncoding;\nexport const AXIS_PARTS: AxisPart[] = ['domain', 'grid', 'labels', 'ticks', 'title'];\n\n\n\n/**\n * A dictionary listing whether a certain axis property is applicable for only main axes or only grid axes.\n * (Properties not listed are applicable for both)\n */\nexport const AXIS_PROPERTY_TYPE: {\n  // Using Mapped Type to declare type (https://www.typescriptlang.org/docs/handbook/advanced-types.html#mapped-types)\n  [k in keyof VgAxis]: 'main' | 'grid' | 'both'\n} = {\n  grid: 'grid',\n  gridScale: 'grid',\n\n  domain: 'main',\n  labels: 'main',\n  labelFlush: 'main',\n  labelOverlap: 'main',\n  minExtent: 'main',\n  maxExtent: 'main',\n  offset: 'main',\n  ticks: 'main',\n  title: 'main',\n  values: 'both',\n\n  scale: 'both',\n  zindex: 'both' // this is actually set afterward, so it doesn't matter\n};\n\nexport interface AxisEncoding {\n  /**\n   * Custom encoding for the axis container.\n   */\n  axis?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for the axis domain rule mark.\n   */\n  domain?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for axis gridline rule marks.\n   */\n  grid?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for axis label text marks.\n   */\n  labels?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for axis tick rule marks.\n   */\n  ticks?: GuideEncodingEntry;\n\n  /**\n   * Custom encoding for the axis title text mark.\n   */\n  title?: GuideEncodingEntry;\n}\n\nconst COMMON_AXIS_PROPERTIES_INDEX: Flag<keyof (VgAxis | Axis)> = {\n  orient: 1, // other things can depend on orient\n\n  domain: 1,\n  format: 1,\n  grid: 1,\n  labelBound: 1,\n  labelFlush: 1,\n  labelPadding: 1,\n  labels: 1,\n  labelOverlap: 1,\n  maxExtent: 1,\n  minExtent: 1,\n  offset: 1,\n  position: 1,\n  tickCount: 1,\n  ticks: 1,\n  tickSize: 1,\n  title: 1,\n  titlePadding: 1,\n  values: 1,\n  zindex: 1,\n};\n\nconst AXIS_PROPERTIES_INDEX: Flag<keyof Axis> = {\n  ...COMMON_AXIS_PROPERTIES_INDEX,\n  encoding: 1,\n  labelAngle: 1,\n  titleMaxLength: 1\n};\n\nconst VG_AXIS_PROPERTIES_INDEX: Flag<keyof VgAxis> = {\n  scale: 1,\n  ...COMMON_AXIS_PROPERTIES_INDEX,\n  gridScale: 1,\n  encode: 1\n};\n\nexport function isAxisProperty(prop: string): prop is keyof Axis {\n  return !!AXIS_PROPERTIES_INDEX[prop];\n}\n\nexport const VG_AXIS_PROPERTIES = flagKeys(VG_AXIS_PROPERTIES_INDEX);\n\n// Export for dependent projects\nexport const AXIS_PROPERTIES = flagKeys(AXIS_PROPERTIES_INDEX);\n\nexport interface AxisConfigMixins {\n  /**\n   * Axis configuration, which determines default properties for all `x` and `y` [axes](https://vega.github.io/vega-lite/docs/axis.html). For a full list of axis configuration options, please see the [corresponding section of the axis documentation](https://vega.github.io/vega-lite/docs/axis.html#config).\n   */\n  axis?: AxisConfig;\n\n  /**\n   * X-axis specific config.\n   */\n  axisX?: VgAxisConfig;\n\n  /**\n   * Y-axis specific config.\n   */\n  axisY?: VgAxisConfig;\n\n  /**\n   * Specific axis config for y-axis along the left edge of the chart.\n   */\n  axisLeft?: VgAxisConfig;\n\n  /**\n   * Specific axis config for y-axis along the right edge of the chart.\n   */\n  axisRight?: VgAxisConfig;\n\n  /**\n   * Specific axis config for x-axis along the top edge of the chart.\n   */\n  axisTop?: VgAxisConfig;\n\n  /**\n   * Specific axis config for x-axis along the bottom edge of the chart.\n   */\n  axisBottom?: VgAxisConfig;\n\n  /**\n   * Specific axis config for axes with \"band\" scales.\n   */\n  axisBand?: VgAxisConfig;\n}\n"]}