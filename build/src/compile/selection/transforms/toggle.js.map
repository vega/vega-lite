{"version":3,"file":"toggle.js","sourceRoot":"","sources":["../../../../../src/compile/selection/transforms/toggle.ts"],"names":[],"mappings":";;AACA,0CAA6C;AAI7C,IAAM,MAAM,GAAG,SAAS,CAAC;AAEzB,IAAM,MAAM,GAAqB;IAC/B,GAAG,EAAE,UAAS,OAAO;QACnB,OAAO,OAAO,CAAC,IAAI,KAAK,OAAO,IAAI,OAAO,CAAC,MAAM,CAAC;IACpD,CAAC;IAED,OAAO,EAAE,UAAS,KAAK,EAAE,OAAO,EAAE,OAAO;QACvC,OAAO,OAAO,CAAC,MAAM,CAAC;YACpB,IAAI,EAAE,OAAO,CAAC,IAAI,GAAG,MAAM;YAC3B,KAAK,EAAE,KAAK;YACZ,EAAE,EAAE,CAAC,EAAC,MAAM,EAAE,OAAO,CAAC,MAAM,EAAE,MAAM,EAAE,OAAO,CAAC,MAAM,EAAC,CAAC;SACvD,CAAC,CAAC;IACL,CAAC;IAED,UAAU,EAAE,UAAS,KAAK,EAAE,OAAO,EAAE,IAAI;QACvC,IAAM,GAAG,GAAG,OAAO,CAAC,IAAI,GAAG,iBAAK,CAAC;QACjC,IAAM,MAAM,GAAG,OAAO,CAAC,IAAI,GAAG,MAAM,CAAC;QAErC,OAAU,MAAM,kBAAa,GAAG,OAAI;YAClC,CAAC,OAAO,CAAC,OAAO,KAAK,QAAQ,CAAC,CAAC;gBAC1B,MAAM,qBAAkB,CAAC,CAAC;gBAC1B,MAAM,yBAAoB,oBAAQ,CAAC,KAAK,CAAC,QAAK,CAAC;aACjD,MAAM,WAAM,GAAG,YAAS,CAAA,CAAC;IAChC,CAAC;CACF,CAAC;AAEF,kBAAe,MAAM,CAAC","sourcesContent":["\nimport {TUPLE, unitName} from '../selection';\nimport {TransformCompiler} from './transforms';\n\n\nconst TOGGLE = '_toggle';\n\nconst toggle:TransformCompiler = {\n  has: function(selCmpt) {\n    return selCmpt.type === 'multi' && selCmpt.toggle;\n  },\n\n  signals: function(model, selCmpt, signals) {\n    return signals.concat({\n      name: selCmpt.name + TOGGLE,\n      value: false,\n      on: [{events: selCmpt.events, update: selCmpt.toggle}]\n    });\n  },\n\n  modifyExpr: function(model, selCmpt, expr) {\n    const tpl = selCmpt.name + TUPLE;\n    const signal = selCmpt.name + TOGGLE;\n\n    return `${signal} ? null : ${tpl}, ` +\n      (selCmpt.resolve === 'global' ?\n        `${signal} ? null : true, ` :\n        `${signal} ? null : {unit: ${unitName(model)}}, `) +\n      `${signal} ? ${tpl} : null`;\n  }\n};\n\nexport default toggle;\n"]}