{"version":3,"file":"area.test.js","sourceRoot":"","sources":["../../../../test/compile/mark/area.test.ts"],"names":[],"mappings":"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","sourcesContent":["/* tslint:disable quotemark */\n\nimport {assert} from 'chai';\nimport {COLOR, X, Y} from '../../../src/channel';\nimport {area} from '../../../src/compile/mark/area';\nimport {Encoding} from '../../../src/encoding';\nimport {NormalizedUnitSpec} from '../../../src/spec';\nimport {parseUnitModelWithScaleAndLayoutSize} from '../../util';\n\ndescribe('Mark: Area', function() {\n  function verticalArea(moreEncoding: Encoding<string> = {}): NormalizedUnitSpec {\n    return {\n      \"mark\": \"area\",\n      \"encoding\":\n        {\n          \"x\": {\"timeUnit\": \"year\", \"field\": \"Year\", \"type\": \"temporal\"},\n          \"y\": {\"aggregate\": \"count\", \"type\": \"quantitative\"},\n          ...moreEncoding,\n        },\n      \"data\": {\"url\": \"data/cars.json\"}\n    };\n  }\n\n  describe('vertical area, with log', function() {\n    const model = parseUnitModelWithScaleAndLayoutSize({\n      \"mark\": \"area\",\n      \"encoding\": {\n        \"x\": {\"bin\": true, \"type\": \"quantitative\", \"field\": \"IMDB_Rating\"},\n        \"y\": {\"scale\": {\"type\": 'log'}, \"type\": \"quantitative\", \"field\": 'US_Gross', \"aggregate\": \"mean\"}\n      },\n      \"data\": {\"url\": 'data/movies.json'}\n    });\n    const props = area.encodeEntry(model);\n\n    it('should end on axis', function() {\n      assert.deepEqual(props.y2, {field: {group: 'height'}});\n    });\n\n    it('should has no height', function() {\n      assert.isUndefined(props.height);\n    });\n  });\n\n  describe('stacked vertical area, with binned dimension', function() {\n    const model = parseUnitModelWithScaleAndLayoutSize({\n      \"mark\": \"area\",\n      \"encoding\": {\n        \"x\": {\"bin\": true, \"type\": \"quantitative\", \"field\": \"IMDB_Rating\"},\n        \"y\": {\"type\": \"quantitative\", \"field\": 'US_Gross', \"aggregate\": \"sum\"},\n        \"color\": {\"type\": \"nominal\", \"field\": 'c'}\n      },\n      \"data\": {\"url\": 'data/movies.json'}\n    });\n    const props = area.encodeEntry(model);\n\n    it('should use bin_mid for x', function() {\n      assert.deepEqual(props.x, {field: 'bin_maxbins_10_IMDB_Rating_mid', scale: 'x'});\n    });\n  });\n\n  describe('vertical area, with zero=false', function() {\n    const model = parseUnitModelWithScaleAndLayoutSize({\n      \"mark\": \"area\",\n      \"encoding\": {\n        \"x\": {\"bin\": true, \"type\": \"quantitative\", \"field\": \"IMDB_Rating\"},\n        \"y\": {\"scale\": {\"zero\": false}, \"type\": \"quantitative\", \"field\": 'US_Gross', \"aggregate\": \"mean\"}\n      },\n      \"data\": {\"url\": 'data/movies.json'}\n    });\n    const props = area.encodeEntry(model);\n\n    it('should end on axis', function() {\n      assert.deepEqual(props.y2, {field: {group: 'height'}});\n    });\n\n    it('should has no height', function() {\n      assert.isUndefined(props.height);\n    });\n  });\n\n  describe('vertical area', function() {\n    const model = parseUnitModelWithScaleAndLayoutSize(verticalArea());\n    const props = area.encodeEntry(model);\n\n    it('should have scale for x', function() {\n      assert.deepEqual(props.x, {scale: X, field: 'year_Year'});\n    });\n\n    it('should have scale for y', function() {\n      assert.deepEqual(props.y, {scale: Y, field: 'count_*'});\n    });\n\n    it('should have the correct value for y2', () => {\n      assert.deepEqual(props.y2, {scale: 'y', value: 0});\n    });\n  });\n\n  describe('vertical area with binned dimension', function() {\n    const model = parseUnitModelWithScaleAndLayoutSize(verticalArea());\n    const props = area.encodeEntry(model);\n\n    it('should have scale for x', function() {\n      assert.deepEqual(props.x, {scale: X, field: 'year_Year'});\n    });\n\n    it('should have scale for y', function() {\n      assert.deepEqual(props.y, {scale: Y, field: 'count_*'});\n    });\n\n    it('should have the correct value for y2', () => {\n      assert.deepEqual(props.y2, {scale: 'y', value: 0});\n    });\n  });\n\n  describe('vertical stacked area with color', function () {\n    const model = parseUnitModelWithScaleAndLayoutSize(verticalArea({\n      \"color\": {\"field\": \"Origin\", \"type\": \"quantitative\"}\n    }));\n\n    const props = area.encodeEntry(model);\n\n    it('should have the correct value for y and y2', () => {\n      assert.deepEqual(props.y, {scale: 'y', field: 'count_*_end'});\n      assert.deepEqual(props.y2, {scale: 'y', field: 'count_*_start'});\n    });\n\n    it('should have correct orient', () => {\n      assert.deepEqual(props.orient, {value: 'vertical'});\n    });\n\n    it('should have scale for color', function () {\n      assert.deepEqual(props.fill, {scale: COLOR, field: 'Origin'});\n    });\n  });\n\n  function horizontalArea(moreEncoding: Encoding<string> = {}): NormalizedUnitSpec {\n    return {\n      \"mark\": \"area\",\n      \"encoding\": {\n          \"y\": {\"timeUnit\": \"year\", \"field\": \"Year\", \"type\": \"temporal\"},\n          \"x\": {\"aggregate\": \"count\", \"type\": \"quantitative\"},\n          ...moreEncoding,\n        },\n      \"data\": {\"url\": \"data/cars.json\"}\n    };\n  }\n\n  describe('horizontal area', function() {\n    const model = parseUnitModelWithScaleAndLayoutSize(horizontalArea());\n    const props = area.encodeEntry(model);\n\n    it('should have scale for y', function() {\n      assert.deepEqual(props.y, {scale: Y, field: 'year_Year'});\n    });\n\n    it('should have scale for x', function() {\n      assert.deepEqual(props.x, {scale: X, field: 'count_*'});\n    });\n\n    it('should have the correct value for x2', () => {\n      assert.deepEqual(props.x2, {scale: 'x' , value: 0});\n    });\n  });\n\n  describe('horizontal area, with log', function() {\n    const model = parseUnitModelWithScaleAndLayoutSize({\n      \"mark\": \"area\",\n      \"encoding\": {\n        \"y\": {\"bin\": true, \"type\": \"quantitative\", \"field\": \"IMDB_Rating\"},\n        \"x\": {\"scale\": {\"type\": 'log'}, \"type\": \"quantitative\", \"field\": 'US_Gross', \"aggregate\": \"mean\"}\n      },\n      \"data\": {\"url\": 'data/movies.json'}\n    });\n\n    const props = area.encodeEntry(model);\n\n    it('should end on axis', function() {\n      assert.deepEqual(props.x2, {value: 0});\n    });\n\n    it('should have no width', function() {\n      assert.isUndefined(props.width);\n    });\n  });\n\n  describe('horizontal area, with zero=false', function() {\n    const model = parseUnitModelWithScaleAndLayoutSize({\n      \"mark\": \"area\",\n      \"encoding\": {\n        \"y\": {\"bin\": true, \"type\": \"quantitative\", \"field\": \"IMDB_Rating\"},\n        \"x\": {\"scale\": {\"zero\": false}, \"type\": \"quantitative\", \"field\": 'US_Gross', \"aggregate\": \"mean\"}\n      },\n      \"data\": {\"url\": 'data/movies.json'}\n    });\n\n    const props = area.encodeEntry(model);\n\n    it('should end on axis', function() {\n      assert.deepEqual(props.x2, {value: 0});\n    });\n\n    it('should have no width', function() {\n      assert.isUndefined(props.width);\n    });\n  });\n\n  describe('horizontal stacked area with color', function () {\n    const model = parseUnitModelWithScaleAndLayoutSize(horizontalArea({\n      \"color\": {\"field\": \"Origin\", \"type\": \"nominal\"}\n    }));\n\n    const props = area.encodeEntry(model);\n\n    it('should have the correct value for x and x2', () => {\n      assert.deepEqual(props.x, {scale: 'x', field: 'count_*_end'});\n      assert.deepEqual(props.x2, {scale: 'x', field: 'count_*_start'});\n    });\n\n    it('should have correct orient', () => {\n      assert.deepEqual(props.orient, {value: 'horizontal'});\n    });\n\n    it('should have scale for color', function () {\n      assert.deepEqual(props.fill, {scale: COLOR, field: 'Origin'});\n    });\n  });\n\n  describe('ranged area', function () {\n    it ('vertical area should work with aggregate', function() {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        \"data\": {\"url\": \"data/cars.json\"},\n        \"mark\": \"area\",\n        \"encoding\": {\n          \"x\": {\"timeUnit\": \"year\", \"field\": \"Year\", \"type\": \"temporal\"},\n          \"y\": {\"aggregate\": \"min\", \"field\": \"Weight_in_lbs\", \"type\": \"quantitative\"},\n          \"y2\": {\"aggregate\": \"max\", \"field\": \"Weight_in_lbs\", \"type\": \"quantitative\"}\n        }\n      });\n      const props = area.encodeEntry(model);\n      assert.deepEqual(props.x, {scale: 'x', field: 'year_Year'});\n      assert.deepEqual(props.y, {scale: 'y', field: 'min_Weight_in_lbs'});\n      assert.deepEqual(props.y2, {scale: 'y', field: 'max_Weight_in_lbs'});\n    });\n\n    it ('horizontal area should work with aggregate', function() {\n      const model = parseUnitModelWithScaleAndLayoutSize({\n        \"data\": {\"url\": \"data/cars.json\"},\n        \"mark\": \"area\",\n        \"encoding\": {\n          \"y\": {\"timeUnit\": \"year\", \"field\": \"Year\", \"type\": \"temporal\"},\n          \"x\": {\"aggregate\": \"min\", \"field\": \"Weight_in_lbs\", \"type\": \"quantitative\"},\n          \"x2\": {\"aggregate\": \"max\", \"field\": \"Weight_in_lbs\", \"type\": \"quantitative\"}\n        }\n      });\n      const props = area.encodeEntry(model);\n      assert.deepEqual(props.y, {scale: 'y', field: 'year_Year'});\n      assert.deepEqual(props.x, {scale: 'x', field: 'min_Weight_in_lbs'});\n      assert.deepEqual(props.x2, {scale: 'x', field: 'max_Weight_in_lbs'});\n    });\n  });\n});\n"]}