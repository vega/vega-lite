{
  "$schema": "https://vega.github.io/schema/vega-lite/v6.json",
  "description": "Google's stock price over time.",
  "data": {"url": "data/stocks.csv"},
  "layer": [
    {
      "mark": "line",
      "encoding": {
        "x": {"field": "date", "type": "temporal"},
        "y": {"field": "price", "type": "quantitative"}
      }
    },
    {
      "layer": [
        {
          "mark": {
            "type": "text",
            "dy": 12,
            "bgType": "outline",
            "bgPadding": 3,
            "align": "center",
            "stroke": "white",
            "strokeWidth": 3
          },
          "encoding": {
            "x": {"field": "date", "type": "temporal"},
            "y": {"field": "price", "type": "quantitative"},
            "text": {"field": "price"}
          },
          "transform": [{"filter": "+datum.price === 432.66"}]
        },
        {
          "mark": {
            "type": "text",
            "dy": 12,
            "bgType": "outline",
            "bgPadding": 3,
            "align": "center"
          },
          "encoding": {
            "x": {"field": "date", "type": "temporal"},
            "y": {"field": "price", "type": "quantitative"},
            "text": {"field": "price"}
          },
          "transform": [{"filter": "+datum.price === 432.66"}]
        }
      ]
    },
    {
      "layer": [
        {
          "mark": {
            "type": "text",
            "dy": -12,
            "bgColor": "red",
            "bgOpacity": 0.5,
            "bgCornerRadius": 4,
            "bgPadding": {"left": 6, "top": 4, "right": 6, "bottom": 4}
          },
          "encoding": {
            "x": {"field": "date", "type": "temporal"},
            "y": {"field": "price", "type": "quantitative"},
            "text": {"field": "price"}
          },
          "transform": [{"filter": "+datum.price === 707"}],
          "name": "_fg_text_0"
        },
        {
          "name": "_bg_text_0",
          "mark": {
            "type": "rect",
            "fill": "red",
            "opacity": 0.5,
            "cornerRadius": 4,
            "bgPadding": {"left": 6, "top": 4, "right": 6, "bottom": 4}
          }
        }
      ]
    },
    {
      "layer": [
        {
          "mark": {
            "type": "text",
            "color": "white",
            "fontWeight": "bold",
            "dy": -12,
            "bgColor": "blue",
            "bgPadding": 4
          },
          "encoding": {
            "x": {"field": "date", "type": "temporal"},
            "y": {"field": "price", "type": "quantitative"},
            "text": {"field": "price"}
          },
          "transform": [{"filter": "+datum.price === 619.98"}],
          "name": "_fg_text_1"
        },
        {
          "name": "_bg_text_1",
          "mark": {
            "type": "rect",
            "fill": "blue",
            "opacity": 1,
            "cornerRadius": 0,
            "bgPadding": 4
          }
        }
      ]
    }
  ],
  "transform": [{"filter": "datum.symbol==='GOOG'"}]
}